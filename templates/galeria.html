{% load static %}
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Galería | Dive Costa Rica</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    :root{
      --slide-max: 1400px;
      --ink: #0f172a;
      --muted: #334155;
      --accent: #ff8a00;
      --accent-hover: #e67600;
    }

    body{ background:#ffffff; }
    html{ scroll-behavior:smooth; }

    /* ================= PAGE ================= */
    .page{
      padding:90px 20px 110px;
      background:#ffffff;
    }
    .page-inner{
      max-width:var(--slide-max);
      margin:0 auto;
    }

    .page-header{
      text-align:center;
      max-width:980px;
      margin:0 auto 46px;
    }

    .page-title{
      font-size:clamp(34px, 3.6vw, 58px);
      font-weight:900;
      letter-spacing:-0.7px;
      color:var(--ink);
      margin-bottom:12px;
    }

    .page-subtitle{
      font-size:clamp(18px, 1.25vw, 22px);
      color:var(--muted);
      line-height:1.7;
      margin:0;
    }

    /* ================= GALLERY GRID ================= */
    .g-grid{
      display:grid;
      grid-template-columns:repeat(4, minmax(0, 1fr));
      gap:18px;
      align-items:stretch;
    }

    .g-card{
      border:1px solid rgba(15, 23, 42, 0.08);
      border-radius:18px;
      background:linear-gradient(180deg, #ffffff 0%, #fbfdff 100%);
      box-shadow:0 10px 28px rgba(2, 6, 23, 0.06);
      transition:transform 0.25s ease, box-shadow 0.25s ease;
      overflow:hidden;
      cursor:pointer;
      display:flex;
      flex-direction:column;
      min-height:240px;
    }

    .g-card:hover{
      transform:translateY(-5px);
      box-shadow:0 18px 45px rgba(2, 6, 23, 0.12);
    }

    .g-img{
      width:100%;
      aspect-ratio: 4 / 3;
      object-fit:cover;
      display:block;
      background:rgba(15, 23, 42, 0.04);
    }

    .g-caption{
      padding:14px 16px 16px;
      font-weight:900;
      color:var(--ink);
      letter-spacing:-0.2px;
      font-size:15px;
      text-transform:lowercase;
    }
    .g-caption::first-letter{ text-transform:uppercase; }

    /* ================= MODAL LIGHTBOX ================= */
    .lb-title{
      font-weight:900;
      letter-spacing:-0.2px;
      color:rgba(15,23,42,.92);
    }

    .lb-img{
      width:100%;
      height:auto;
      border-radius:16px;
      border:1px solid rgba(15, 23, 42, 0.10);
      background:#fff;
    }

    .lb-controls{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      justify-content:space-between;
      align-items:center;
      margin-top:14px;
    }

    .btn-cta{
      background:var(--accent);
      border:none;
      color:#fff;
      padding:12px 16px;
      border-radius:999px;
      font-weight:900;
      font-size:15px;
      transition:all 0.25s ease;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      min-width:170px;
      cursor:pointer;
    }

    .btn-cta:hover{
      background:var(--accent-hover);
      transform:translateY(-2px);
      box-shadow:0 12px 30px rgba(0,0,0,0.15);
      color:#fff;
    }

    .btn-ghost{
      background:transparent;
      border:1px solid rgba(15, 23, 42, 0.18);
      color:rgba(15, 23, 42, 0.9);
      padding:12px 16px;
      border-radius:999px;
      font-weight:900;
      font-size:15px;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      min-width:170px;
      transition:all 0.25s ease;
      cursor:pointer;
    }

    .btn-ghost:hover{
      border-color:rgba(15, 23, 42, 0.35);
      transform:translateY(-2px);
      box-shadow:0 10px 26px rgba(2, 6, 23, 0.10);
      color:rgba(15, 23, 42, 0.95);
    }

    /* ================= RESPONSIVE ================= */
    @media (max-width:991px){
      .g-grid{ grid-template-columns:repeat(2, minmax(0, 1fr)); }
      .btn-cta, .btn-ghost{ width:100%; min-width:unset; }
      .lb-controls{ justify-content:flex-start; }
    }

    @media (max-width:576px){
      .g-grid{ grid-template-columns:1fr; }
    }
  </style>
</head>

<body>

<section class="page">
  <div class="page-inner">

    <header class="page-header">
      <h1 class="page-title">Galería</h1>
      <p class="page-subtitle">
        Momentos reales y vida marina en Punta Leona y alrededores. Tocá una foto para verla en grande.
      </p>
    </header>

    <!-- ✅ PNG en static/img/ (sin /galeria/) -->
    <div class="g-grid" id="galleryGrid">

      <div class="g-card" role="button"
           data-src="{% static 'img/arana-de-mar.png' %}"
           data-title="Araña de mar"
           data-index="0">
        <img class="g-img" src="{% static 'img/arana-de-mar.png' %}" alt="Araña de mar">
        <div class="g-caption">Araña de mar</div>
      </div>

      <div class="g-card" role="button"
           data-src="{% static 'img/pez-piedra.png' %}"
           data-title="Pez piedra"
           data-index="1">
        <img class="g-img" src="{% static 'img/pez-piedra.png' %}" alt="Pez piedra">
        <div class="g-caption">Pez piedra</div>
      </div>

      <div class="g-card" role="button"
           data-src="{% static 'img/tortuga-lora.png' %}"
           data-title="Tortuga lora"
           data-index="2">
        <img class="g-img" src="{% static 'img/tortuga-lora.png' %}" alt="Tortuga lora">
        <div class="g-caption">Tortuga lora</div>
      </div>

      <div class="g-card" role="button"
           data-src="{% static 'img/museo-punta-leona.png' %}"
           data-title="Museo Punta Leona"
           data-index="3">
        <img class="g-img" src="{% static 'img/museo-punta-leona.png' %}" alt="Museo Punta Leona">
        <div class="g-caption">Museo Punta Leona</div>
      </div>

      <div class="g-card" role="button"
           data-src="{% static 'img/corales.png' %}"
           data-title="Corales"
           data-index="4">
        <img class="g-img" src="{% static 'img/corales.png' %}" alt="Corales">
        <div class="g-caption">Corales</div>
      </div>

      <div class="g-card" role="button"
           data-src="{% static 'img/pulpo.png' %}"
           data-title="Pulpo"
           data-index="5">
        <img class="g-img" src="{% static 'img/pulpo.png' %}" alt="Pulpo">
        <div class="g-caption">Pulpo</div>
      </div>

      <div class="g-card" role="button"
           data-src="{% static 'img/nudibranquio.png' %}"
           data-title="Nudibranquio"
           data-index="6">
        <img class="g-img" src="{% static 'img/nudibranquio.png' %}" alt="Nudibranquio">
        <div class="g-caption">Nudibranquio</div>
      </div>

      <div class="g-card" role="button"
           data-src="{% static 'img/morena-joya.png' %}"
           data-title="Morena joya"
           data-index="7">
        <img class="g-img" src="{% static 'img/morena-joya.png' %}" alt="Morena joya">
        <div class="g-caption">Morena joya</div>
      </div>

      <div class="g-card" role="button"
           data-src="{% static 'img/estrella-de-mar.png' %}"
           data-title="Estrella de mar"
           data-index="8">
        <img class="g-img" src="{% static 'img/estrella-de-mar.png' %}" alt="Estrella de mar">
        <div class="g-caption">Estrella de mar</div>
      </div>

      <div class="g-card" role="button"
           data-src="{% static 'img/tiburon-punta-blanca.png' %}"
           data-title="Tiburón punta blanca"
           data-index="9">
        <img class="g-img" src="{% static 'img/tiburon-punta-blanca.png' %}" alt="Tiburón punta blanca">
        <div class="g-caption">Tiburón punta blanca</div>
      </div>

      <div class="g-card" role="button"
           data-src="{% static 'img/pez-globo-negro.png' %}"
           data-title="Pez globo negro"
           data-index="10">
        <img class="g-img" src="{% static 'img/pez-globo-negro.png' %}" alt="Pez globo negro">
        <div class="g-caption">Pez globo negro</div>
      </div>

      <div class="g-card" role="button"
           data-src="{% static 'img/raya-latigo.png' %}"
           data-title="Raya látigo"
           data-index="11">
        <img class="g-img" src="{% static 'img/raya-latigo.png' %}" alt="Raya látigo">
        <div class="g-caption">Raya látigo</div>
      </div>

      <div class="g-card" role="button"
           data-src="{% static 'img/morena.png' %}"
           data-title="Morena"
           data-index="12">
        <img class="g-img" src="{% static 'img/morena.png' %}" alt="Morena">
        <div class="g-caption">Morena</div>
      </div>

      <div class="g-card" role="button"
           data-src="{% static 'img/ojo-de-raya.png' %}"
           data-title="Ojo de raya"
           data-index="13">
        <img class="g-img" src="{% static 'img/ojo-de-raya.png' %}" alt="Ojo de raya">
        <div class="g-caption">Ojo de raya</div>
      </div>

    </div>

    <div class="mt-5 d-flex flex-wrap gap-3 justify-content-center">
      <a class="btn-cta" href="https://api.whatsapp.com/send?phone=50687172883" target="_blank" rel="noopener">
        WhatsApp
      </a>
      <a class="btn-ghost" href="{% url 'home' %}">
        Volver al home
      </a>
    </div>

  </div>
</section>

<!-- ================= MODAL LIGHTBOX ================= -->
<div class="modal fade" id="lightboxModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content" style="border-radius:22px; overflow:hidden; border:1px solid rgba(15,23,42,.10);">

      <div class="modal-header" style="background:#fff;">
        <h5 class="modal-title lb-title" id="lbTitle">Foto</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>

      <div class="modal-body" style="background:linear-gradient(180deg, #ffffff 0%, #fbfdff 100%);">
        <img id="lbImg" class="lb-img" src="" alt="Foto en grande">

        <div class="lb-controls">
          <button type="button" class="btn-ghost" id="prevBtn">Anterior</button>
          <button type="button" class="btn-cta" id="nextBtn">Siguiente</button>
        </div>
      </div>

    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
  const cards = Array.from(document.querySelectorAll(".g-card"));
  const lbTitle = document.getElementById("lbTitle");
  const lbImg = document.getElementById("lbImg");
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");

  let currentIndex = 0;

  function openAt(index){
    const item = cards[index];
    if (!item) return;

    currentIndex = index;

    const src = item.getAttribute("data-src");
    const title = item.getAttribute("data-title");

    lbImg.src = src;
    lbImg.alt = title;
    lbTitle.textContent = title;

    const modal = bootstrap.Modal.getOrCreateInstance(document.getElementById("lightboxModal"));
    modal.show();
  }

  function go(delta){
    const total = cards.length;
    const next = (currentIndex + delta + total) % total;
    openAt(next);
  }

  cards.forEach((card) => {
    card.addEventListener("click", () => {
      const idx = parseInt(card.getAttribute("data-index"), 10);
      openAt(idx);
    });
  });

  prevBtn.addEventListener("click", () => go(-1));
  nextBtn.addEventListener("click", () => go(1));

  document.addEventListener("keydown", (e) => {
    const modalEl = document.getElementById("lightboxModal");
    const isOpen = modalEl.classList.contains("show");
    if (!isOpen) return;

    if (e.key === "ArrowLeft") go(-1);
    if (e.key === "ArrowRight") go(1);
  });
</script>

</body>
</html>
